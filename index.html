<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arbitraje 1X2 — Banca fija 100€</title>
  <style>
    :root{--gap:12px;--radius:14px;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;padding:24px;background:#0b0e14;color:#e6e6e6}
    h1{font-size:20px;margin:0 0 12px}
    .card{background:#111827;border:1px solid #2a2f3a;border-radius:var(--radius);padding:16px;max-width:760px;margin-bottom:24px}
    .grid{display:grid;gap:var(--gap)}
    .g3{grid-template-columns:repeat(3,1fr)}
    .g2{grid-template-columns:repeat(2,1fr)}
    label{display:flex;justify-content:space-between;align-items:center;gap:8px;font-size:12px;opacity:.8}
    input[type="number"]{width:100%;padding:10px;border-radius:10px;border:1px solid #2a2f3a;background:#0e1525;color:#e6e6e6}
    .muted{opacity:.75;font-size:12px}
    .ok{color:#22c55e}
    .bad{color:#f97316}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .box{background:#0e1525;border:1px dashed #2a2f3a;border-radius:12px;padding:12px}
    .right{text-align:right}
    small{opacity:.65}
    .prob{font-variant-numeric:tabular-nums;opacity:.75}
  </style>
</head>
<body>
  <div class="card grid" id="app">
    <h1>Arbitraje 1X2</h1>
    <div class="muted">Banca fija: <b>100,00 €</b>. Introduce cuotas decimales.</div>

    <div class="grid g3">
      <div>
        <label>Cuota Gana A <span class="prob" id="pa">—</span></label>
        <input id="oa" type="number" step="0.01" min="1.01" placeholder="2.10">
      </div>
      <div>
        <label>Cuota Empate <span class="prob" id="px">—</span></label>
        <input id="ox" type="number" step="0.01" min="1.01" placeholder="3.40">
      </div>
      <div>
        <label>Cuota Gana B <span class="prob" id="pb">—</span></label>
        <input id="ob" type="number" step="0.01" min="1.01" placeholder="3.20">
      </div>
    </div>

    <div id="result" class="grid" style="display:none">
      <div id="arbFlag" class="mono"></div>

      <div class="box grid g3">
        <div>
          <div class="muted">Apostar A</div>
          <div class="mono" id="sa">–</div>
        </div>
        <div>
          <div class="muted">Apostar X</div>
          <div class="mono" id="sx">–</div>
        </div>
        <div>
          <div class="muted">Apostar B</div>
          <div class="mono" id="sb">–</div>
        </div>
      </div>

      <div class="grid g3">
        <div>
          <div class="muted">Payout igualado (teórico)</div>
          <div class="mono" id="payout">–</div>
        </div>
        <div>
          <div class="muted">Inversión total</div>
          <div class="mono" id="inv">100.00</div>
        </div>
        <div>
          <div class="muted">Beneficio estimado</div>
          <div class="mono" id="profit">–</div>
        </div>
      </div>
      <div class="right">
        <small id="margin"></small>
      </div>
    </div>

    <div class="muted">Nota: si 1/oa + 1/ox + 1/ob < 1, hay arbitraje y el beneficio es positivo. Sin comisiones ni límites.</div>
  </div>

  <div class="card grid" id="app12">
    <h1>Arbitraje 1/2</h1>
    <div class="muted">Banca fija: <b>100,00 €</b>. Introduce cuotas decimales.</div>

    <div class="grid g2">
      <div>
        <label>Cuota Gana A <span class="prob" id="pa12">—</span></label>
        <input id="oa12" type="number" step="0.01" min="1.01" placeholder="1.95">
      </div>
      <div>
        <label>Cuota Gana B <span class="prob" id="pb12">—</span></label>
        <input id="ob12" type="number" step="0.01" min="1.01" placeholder="1.95">
      </div>
    </div>

    <div id="result12" class="grid" style="display:none">
      <div id="arbFlag12" class="mono"></div>

      <div class="box grid g2">
        <div>
          <div class="muted">Apostar A</div>
          <div class="mono" id="sa12">–</div>
        </div>
        <div>
          <div class="muted">Apostar B</div>
          <div class="mono" id="sb12">–</div>
        </div>
      </div>

      <div class="grid g3">
        <div>
          <div class="muted">Payout igualado (teórico)</div>
          <div class="mono" id="payout12">–</div>
        </div>
        <div>
          <div class="muted">Inversión total</div>
          <div class="mono" id="inv12">100.00</div>
        </div>
        <div>
          <div class="muted">Beneficio estimado</div>
          <div class="mono" id="profit12">–</div>
        </div>
      </div>
      <div class="right">
        <small id="margin12"></small>
      </div>
    </div>

    <div class="muted">Nota: si 1/oa + 1/ob < 1, hay arbitraje y el beneficio es positivo. Sin comisiones ni límites.</div>
  </div>

  <div class="card grid" id="app1xdc">
    <h1>Arbitraje 1X2 ↔ Doble oportunidad</h1>
    <div class="muted">Combina una apuesta simple con una doble oportunidad complementaria (1 + X2, X + 12, 2 + 1X).</div>

    <div class="grid g3">
      <div>
        <label>Cuota 1 (solo)</label>
        <input id="o1dc" type="number" step="0.01" min="1.01" placeholder="2.10">
      </div>
      <div>
        <label>Cuota X (solo)</label>
        <input id="oxdc" type="number" step="0.01" min="1.01" placeholder="3.30">
      </div>
      <div>
        <label>Cuota 2 (solo)</label>
        <input id="o2dc" type="number" step="0.01" min="1.01" placeholder="3.20">
      </div>
    </div>

    <div class="grid g3">
      <div>
        <label>Cuota 1X (doble)</label>
        <input id="o1xdc" type="number" step="0.01" min="1.01" placeholder="1.35">
      </div>
      <div>
        <label>Cuota X2 (doble)</label>
        <input id="ox2dc" type="number" step="0.01" min="1.01" placeholder="1.40">
      </div>
      <div>
        <label>Cuota 12 (doble)</label>
        <input id="o12dc" type="number" step="0.01" min="1.01" placeholder="1.35">
      </div>
    </div>

    <div id="resultdc" class="grid" style="display:none">
      <div class="muted">Resultados por combinación:</div>

      <div class="combo" id="combo-1x2" style="display:none">
        <div class="muted"><b>1</b> + <b>X2</b></div>
        <div id="flag-1x2" class="mono"></div>
        <div class="box grid g2">
          <div>
            <div class="muted">Apostar 1</div>
            <div class="mono" id="stake-single-1x2">–</div>
          </div>
          <div>
            <div class="muted">Apostar X2</div>
            <div class="mono" id="stake-double-1x2">–</div>
          </div>
        </div>
        <div class="grid g3">
          <div>
            <div class="muted">Payout igualado (teórico)</div>
            <div class="mono" id="payout-1x2">–</div>
          </div>
          <div>
            <div class="muted">Inversión total</div>
            <div class="mono" id="inv-1x2">–</div>
          </div>
          <div>
            <div class="muted">Beneficio estimado</div>
            <div class="mono" id="profit-1x2">–</div>
          </div>
        </div>
        <div class="right">
          <small id="margin-1x2"></small>
        </div>
      </div>

      <div class="combo" id="combo-x12" style="display:none">
        <div class="muted"><b>X</b> + <b>12</b></div>
        <div id="flag-x12" class="mono"></div>
        <div class="box grid g2">
          <div>
            <div class="muted">Apostar X</div>
            <div class="mono" id="stake-single-x12">–</div>
          </div>
          <div>
            <div class="muted">Apostar 12</div>
            <div class="mono" id="stake-double-x12">–</div>
          </div>
        </div>
        <div class="grid g3">
          <div>
            <div class="muted">Payout igualado (teórico)</div>
            <div class="mono" id="payout-x12">–</div>
          </div>
          <div>
            <div class="muted">Inversión total</div>
            <div class="mono" id="inv-x12">–</div>
          </div>
          <div>
            <div class="muted">Beneficio estimado</div>
            <div class="mono" id="profit-x12">–</div>
          </div>
        </div>
        <div class="right">
          <small id="margin-x12"></small>
        </div>
      </div>

      <div class="combo" id="combo-21x" style="display:none">
        <div class="muted"><b>2</b> + <b>1X</b></div>
        <div id="flag-21x" class="mono"></div>
        <div class="box grid g2">
          <div>
            <div class="muted">Apostar 2</div>
            <div class="mono" id="stake-single-21x">–</div>
          </div>
          <div>
            <div class="muted">Apostar 1X</div>
            <div class="mono" id="stake-double-21x">–</div>
          </div>
        </div>
        <div class="grid g3">
          <div>
            <div class="muted">Payout igualado (teórico)</div>
            <div class="mono" id="payout-21x">–</div>
          </div>
          <div>
            <div class="muted">Inversión total</div>
            <div class="mono" id="inv-21x">–</div>
          </div>
          <div>
            <div class="muted">Beneficio estimado</div>
            <div class="mono" id="profit-21x">–</div>
          </div>
        </div>
        <div class="right">
          <small id="margin-21x"></small>
        </div>
      </div>
    </div>

    <div class="muted">Condición: 1/cuota simple + 1/cuota doble &lt; 1 ⇒ arbitraje con stake proporcional al inverso de cada cuota.</div>
  </div>

  <script>
    const BANK = 100;
    const $ = (id) => document.getElementById(id);
    const fmt = (n) => isFinite(n) ? Number(n).toFixed(2) : '—';
    const fmtPct = (n) => isFinite(n) ? (n * 100).toFixed(2) + '%' : '—';

    function setProbability(el, prob) {
      $(el).textContent = fmtPct(prob);
    }

    function resetProbabilities() {
      ['pa', 'px', 'pb'].forEach(id => setProbability(id, NaN));
    }

    function resetProbabilities12() {
      ['pa12', 'pb12'].forEach(id => setProbability(id, NaN));
    }

    function calc() {
      const oa = parseFloat($('oa').value);
      const ox = parseFloat($('ox').value);
      const ob = parseFloat($('ob').value);

      if (![oa, ox, ob].every(v => v && v > 1)) {
        resetProbabilities();
        $('result').style.display = 'none';
        return;
      }

      const invA = 1 / oa, invX = 1 / ox, invB = 1 / ob;
      const invSum = invA + invX + invB;
      const margin = 1 - invSum; // >0 si hay arbitraje

      setProbability('pa', invA / invSum);
      setProbability('px', invX / invSum);
      setProbability('pb', invB / invSum);

      let sA = BANK * invA / invSum;
      let sX = BANK * invX / invSum;
      let sB = BANK * invB / invSum;

      sA = Math.round(sA * 100) / 100;
      sX = Math.round(sX * 100) / 100;
      sB = Math.round(sB * 100) / 100;

      const S = sA + sX + sB;
      const payoutTheo = BANK / invSum;
      const payoutEst = Math.min(sA * oa, sX * ox, sB * ob);
      const profitEst = payoutEst - S;

      $('arbFlag').innerHTML = margin > 0
        ? `<span class="ok">Arbitraje SÍ</span> · margen ${(margin * 100).toFixed(2)}%`
        : `<span class="bad">Arbitraje NO</span> · overround ${(invSum * 100).toFixed(2)}%`;

      $('sa').textContent = fmt(sA);
      $('sx').textContent = fmt(sX);
      $('sb').textContent = fmt(sB);
      $('payout').textContent = fmt(payoutTheo);
      $('inv').textContent = fmt(S);
      $('profit').textContent = fmt(profitEst);
      $('margin').textContent = `ROI teórico ≈ ${((1 / invSum - 1) * 100).toFixed(2)}%`;

      $('result').style.display = '';
    }

    function calc12() {
      const oa = parseFloat($('oa12').value);
      const ob = parseFloat($('ob12').value);

      if (![oa, ob].every(v => v && v > 1)) {
        resetProbabilities12();
        $('result12').style.display = 'none';
        return;
      }

      const invA = 1 / oa;
      const invB = 1 / ob;
      const invSum = invA + invB;
      const margin = 1 - invSum;

      setProbability('pa12', invA / invSum);
      setProbability('pb12', invB / invSum);

      let sA = BANK * invA / invSum;
      let sB = BANK * invB / invSum;

      sA = Math.round(sA * 100) / 100;
      sB = Math.round(sB * 100) / 100;

      const S = sA + sB;
      const payoutTheo = BANK / invSum;
      const payoutEst = Math.min(sA * oa, sB * ob);
      const profitEst = payoutEst - S;

      $('arbFlag12').innerHTML = margin > 0
        ? `<span class="ok">Arbitraje SÍ</span> · margen ${(margin * 100).toFixed(2)}%`
        : `<span class="bad">Arbitraje NO</span> · overround ${(invSum * 100).toFixed(2)}%`;

      $('sa12').textContent = fmt(sA);
      $('sb12').textContent = fmt(sB);
      $('payout12').textContent = fmt(payoutTheo);
      $('inv12').textContent = fmt(S);
      $('profit12').textContent = fmt(profitEst);
      $('margin12').textContent = `ROI teórico ≈ ${((1 / invSum - 1) * 100).toFixed(2)}%`;

      $('result12').style.display = '';
    }

    function calc1xdc() {
      const combos = [
        {
          key: '1x2',
          singleId: 'o1dc',
          doubleId: 'ox2dc',
          singleLabel: '1',
          doubleLabel: 'X2'
        },
        {
          key: 'x12',
          singleId: 'oxdc',
          doubleId: 'o12dc',
          singleLabel: 'X',
          doubleLabel: '12'
        },
        {
          key: '21x',
          singleId: 'o2dc',
          doubleId: 'o1xdc',
          singleLabel: '2',
          doubleLabel: '1X'
        }
      ];

      let anyValid = false;

      for (const combo of combos) {
        const oSingle = parseFloat($(combo.singleId).value);
        const oDouble = parseFloat($(combo.doubleId).value);

        if (!(oSingle && oSingle > 1 && oDouble && oDouble > 1)) {
          $(`combo-${combo.key}`).style.display = 'none';
          continue;
        }

        anyValid = true;

        const invSingle = 1 / oSingle;
        const invDouble = 1 / oDouble;
        const invSum = invSingle + invDouble;
        const margin = 1 - invSum;

        let stakeSingle = BANK * invSingle / invSum;
        let stakeDouble = BANK * invDouble / invSum;

        stakeSingle = Math.round(stakeSingle * 100) / 100;
        stakeDouble = Math.round(stakeDouble * 100) / 100;

        const totalStake = stakeSingle + stakeDouble;
        const payoutSingle = stakeSingle * oSingle;
        const payoutDouble = stakeDouble * oDouble;
        const payoutTheo = BANK / invSum;
        const profitEst = Math.min(payoutSingle, payoutDouble) - totalStake;

        $(`flag-${combo.key}`).innerHTML = margin > 0
          ? `<span class="ok">Arbitraje SÍ</span> · margen ${(margin * 100).toFixed(2)}%`
          : `<span class="bad">Arbitraje NO</span> · overround ${(invSum * 100).toFixed(2)}%`;

        $(`stake-single-${combo.key}`).textContent = fmt(stakeSingle);
        $(`stake-double-${combo.key}`).textContent = fmt(stakeDouble);
        $(`payout-${combo.key}`).textContent = fmt(payoutTheo);
        $(`inv-${combo.key}`).textContent = fmt(totalStake);
        $(`profit-${combo.key}`).textContent = fmt(profitEst);
        $(`margin-${combo.key}`).textContent = `ROI teórico ≈ ${((1 / invSum - 1) * 100).toFixed(2)}%`;

        $(`combo-${combo.key}`).style.display = '';
      }

      $('resultdc').style.display = anyValid ? '' : 'none';
    }

    ['oa', 'ox', 'ob'].forEach(id => $(id).addEventListener('input', calc));
    ['oa12', 'ob12'].forEach(id => $(id).addEventListener('input', calc12));
    ['o1dc', 'oxdc', 'o2dc', 'o1xdc', 'ox2dc', 'o12dc'].forEach(id => $(id).addEventListener('input', calc1xdc));

    calc();
    calc12();
    calc1xdc();
  </script>
</body>
</html>
