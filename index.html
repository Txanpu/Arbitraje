<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arbitraje 1X2 — Banca fija 100€</title>
  <style>
    :root{--gap:12px;--radius:14px;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;padding:24px;background:#0b0e14;color:#e6e6e6}
    h1{font-size:20px;margin:0 0 12px}
    .card{background:#111827;border:1px solid #2a2f3a;border-radius:var(--radius);padding:16px;max-width:760px}
    .grid{display:grid;gap:var(--gap)}
    .g3{grid-template-columns:repeat(3,1fr)}
    label{font-size:12px;opacity:.8}
    input[type="number"]{width:100%;padding:10px;border-radius:10px;border:1px solid #2a2f3a;background:#0e1525;color:#e6e6e6}
    .muted{opacity:.75;font-size:12px}
    .ok{color:#22c55e}
    .bad{color:#f97316}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .box{background:#0e1525;border:1px dashed #2a2f3a;border-radius:12px;padding:12px}
    .right{text-align:right}
    small{opacity:.65}
  </style>
</head>
<body>
  <div class="card grid" id="app">
    <h1>Arbitraje 1X2</h1>
    <div class="muted">Banca fija: <b>100,00 €</b>. Introduce cuotas decimales.</div>

    <div class="grid g3">
      <div>
        <label>Cuota Gana A</label>
        <input id="oa" type="number" step="0.01" min="1.01" placeholder="2.10">
      </div>
      <div>
        <label>Cuota Empate</label>
        <input id="ox" type="number" step="0.01" min="1.01" placeholder="3.40">
      </div>
      <div>
        <label>Cuota Gana B</label>
        <input id="ob" type="number" step="0.01" min="1.01" placeholder="3.20">
      </div>
    </div>

    <div id="result" class="grid" style="display:none">
      <div id="arbFlag" class="mono"></div>

      <div class="box grid g3">
        <div>
          <div class="muted">Apostar A</div>
          <div class="mono" id="sa">–</div>
        </div>
        <div>
          <div class="muted">Apostar X</div>
          <div class="mono" id="sx">–</div>
        </div>
        <div>
          <div class="muted">Apostar B</div>
          <div class="mono" id="sb">–</div>
        </div>
      </div>

      <div class="grid g3">
        <div>
          <div class="muted">Payout igualado (teórico)</div>
          <div class="mono" id="payout">–</div>
        </div>
        <div>
          <div class="muted">Inversión total</div>
          <div class="mono" id="inv">100.00</div>
        </div>
        <div>
          <div class="muted">Beneficio estimado</div>
          <div class="mono" id="profit">–</div>
        </div>
      </div>
      <div class="right">
        <small id="margin"></small>
      </div>
    </div>

    <div class="muted">Nota: si 1/oa + 1/ox + 1/ob < 1, hay arbitraje y el beneficio es positivo. Sin comisiones ni límites.</div>
  </div>

  <script>
    const BANK = 100;
    const $ = (id) => document.getElementById(id);
    const fmt = (n) => isFinite(n) ? n.toFixed(2) : '—';

    function calc(){
      const oa = parseFloat($('oa').value);
      const ox = parseFloat($('ox').value);
      const ob = parseFloat($('ob').value);
      if (![oa,ox,ob].every(v => v && v>1)) { $('result').style.display='none'; return; }

      const invA = 1/oa, invX = 1/ox, invB = 1/ob;
      const invSum = invA + invX + invB;
      const margin = 1 - invSum; // >0 si hay arbitraje

      // Stakes que igualan payout con banca fija BANK
      let sA = BANK * invA / invSum;
      let sX = BANK * invX / invSum;
      let sB = BANK * invB / invSum;

      // Redondeo a céntimos
      sA = Math.round(sA*100)/100;
      sX = Math.round(sX*100)/100;
      sB = Math.round(sB*100)/100;

      // Recalcular totales y payout tras redondeo
      const S = sA + sX + sB;
      const payoutTheo = BANK / invSum; // teórico sin redondeo
      const payoutEst = Math.min(sA*oa, sX*ox, sB*ob); // conservador tras redondeo
      const profitEst = payoutEst - S;

      $('arbFlag').innerHTML = margin>0
        ? `<span class="ok">Arbitraje SÍ</span> · margen ${(margin*100).toFixed(2)}%`
        : `<span class="bad">Arbitraje NO</span> · overround ${(invSum*100).toFixed(2)}%`;

      $('sa').textContent = fmt(sA);
      $('sx').textContent = fmt(sX);
      $('sb').textContent = fmt(sB);
      $('payout').textContent = fmt(payoutTheo);
      $('inv').textContent = fmt(S);
      $('profit').textContent = fmt(profitEst);
      $('margin').textContent = `ROI teórico ≈ ${((1/invSum - 1)*100).toFixed(2)}%`;

      $('result').style.display='';
    }

    ['oa','ox','ob'].forEach(id=>$(id).addEventListener('input',calc));
  </script>
</body>
</html>